<h1>Productos</h1>

<form method="GET" action="/products">
    <input type="text" name="query" placeholder="Buscar categoría o estado..." value="{{query}}" />
    
    <select name="sort">
        <option value="">Ordenar por precio</option>
        <option value="asc" {{#if (eq sort "asc")}}selected{{/if}}>Menor a mayor</option>
        <option value="desc" {{#if (eq sort "desc")}}selected{{/if}}>Mayor a menor</option>
    </select>

    <button type="submit">Filtrar</button>
</form>

<div class="product-list">
    {{#each payload}}
        <div class="product-card">
            <img src="{{this.thumbnail}}" alt="{{this.title}}" width="150" />
            <h3>{{this.title}}</h3>
            <p>${{this.price}}</p>
            <a href="/products/{{this._id}}">Ver detalle</a>
        </div>
    {{/each}}
</div>

<div class="pagination">
    {{#if hasPrevPage}}
        <a href="{{prevLink}}">Anterior</a>
    {{/if}}

    <span>Página {{page}} de {{totalPages}}</span>

    {{#if hasNextPage}}
        <a href="{{nextLink}}">Siguiente</a>
    {{/if}}
</div>

<a href="/">Volver al inicio</a>
